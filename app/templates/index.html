<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéì –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/min.css">
    <link rel="stylesheet" href="/static/css/font.woff2">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-graduation-cap"></i> –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h1>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <!-- –ì—Ä—É–ø–ø—ã -->
                <div class="nav-section">
                    <div class="nav-section-header" data-section="groups">
                        <i class="fas fa-users"></i>
                        <span>–ì—Ä—É–ø–ø—ã</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="nav-section-content" id="groupsContent">
                        <div class="form-group">
                            <label>–¢–µ–∫—É—â–∞—è –≥—Ä—É–ø–ø–∞:</label>
                            <select id="groupSelector" class="form-control">
                                <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                            </select>
                        </div>
                        <div class="form-group" style="display: flex; gap: 8px; margin-top: 10px;">
                            <button class="btn-primary btn-small" onclick="app.createGroup()" style="flex: 1;">
                                <i class="fas fa-plus"></i> –ù–æ–≤–∞—è
                            </button>
                            <button class="btn-secondary btn-small" onclick="app.renameGroup()" style="flex: 1;">
                                <i class="fas fa-edit"></i> –ü–µ—Ä–µ–∏–º–µ–Ω.
                            </button>
                        </div>
                        <button class="btn-danger btn-small" onclick="app.deleteCurrentGroup()" style="width: 100%; margin-top: 5px;">
                            <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É
                        </button>
                    </div>
                </div>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="nav-section">
                    <div class="nav-section-header" data-section="statistics">
                        <i class="fas fa-chart-pie"></i>
                        <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="nav-section-content" id="statisticsContent">
                        <div class="stats-cards">
                            <div class="stat-card">
                                <div class="stat-value" id="statSubjects">0</div>
                                <div class="stat-label">–ü—Ä–µ–¥–º–µ—Ç—ã</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="statTotalHours">0</div>
                                <div class="stat-label">–í—Å–µ–≥–æ —á–∞—Å–æ–≤</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="statRemainingHours">0</div>
                                <div class="stat-label">–û—Å—Ç–∞–ª–æ—Å—å —á–∞—Å–æ–≤</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ -->
                <div class="nav-section">
                    <div class="nav-section-header" data-section="teachers">
                        <i class="fas fa-user-tie"></i>
                        <span>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="nav-section-content" id="teachersContent">
                        <form class="compact-form" id="addTeacherForm">
                            <div class="form-group">
                                <label>–§–ò–û –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è:</label>
                                <input type="text" name="name" placeholder="–ò–≤–∞–Ω–æ–≤ –ò.–ò." required>
                            </div>
                            <button type="submit" class="btn-primary btn-small">
                                <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
                            </button>
                        </form>

                        <div class="teachers-list compact-list" id="teachersList">
                            <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                        </div>
                    </div>
                </div>

                <!-- –ü—Ä–µ–¥–º–µ—Ç—ã -->
                <div class="nav-section">
                    <div class="nav-section-header" data-section="subjects">
                        <i class="fas fa-book"></i>
                        <span>–ü—Ä–µ–¥–º–µ—Ç—ã</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="nav-section-content" id="subjectsContent">
                        <form class="compact-form" id="addSubjectForm">
                            <div class="form-group">
                                <label>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å:</label>
                                <select name="teacher" id="teacherSelect" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>–ü—Ä–µ–¥–º–µ—Ç:</label>
                                <input type="text" name="subject_name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞" required>
                            </div>
                            <div class="form-group">
                                <label>–ß–∞—Å—ã:</label>
                                <input type="number" name="hours" value="4" min="2" step="2" required>
                            </div>
<div class="form-group">
        <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
        <input type="number" name="priority" value="0" min="0" max="10">
    </div>
    <div class="form-group">
        <label>–ú–∞–∫—Å. –ø–∞—Ä –≤ –¥–µ–Ω—å:</label>
        <input type="number" name="max_per_day" value="2" min="1" max="4">
    </div>

    <div class="form-group">
        <label><i class="fas fa-calendar-week"></i> –ù–µ–¥–µ–ª—å–Ω—ã–µ –∫–≤–æ—Ç—ã:</label>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div>
                <label style="font-size: 0.8rem;">–ú–∏–Ω–∏–º—É–º –ø–∞—Ä –≤ –Ω–µ–¥–µ–ª—é:</label>
                <input type="number" name="min_per_week" value="0" min="0" max="20" style="width: 100%;">
                <small style="font-size: 0.7rem; color: var(--secondary);">0 = –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</small>
            </div>
            <div>
                <label style="font-size: 0.8rem;">–ú–∞–∫—Å–∏–º—É–º –ø–∞—Ä –≤ –Ω–µ–¥–µ–ª—é:</label>
                <input type="number" name="max_per_week" value="20" min="1" max="20" style="width: 100%;">
            </div>
        </div>
    </div>

    <button type="submit" class="btn-primary btn-small">
        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç
    </button>
</form>

                        <div class="subjects-list compact-list" id="subjectsList">
                            <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                        </div>
                    </div>
                </div>

                <!-- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è -->
                <div class="nav-section">
                    <div class="nav-section-header" data-section="filters">
                        <i class="fas fa-ban"></i>
                        <span>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="nav-section-content" id="filtersContent">
                        <form class="compact-form" id="addFilterForm">
                            <div class="form-group">
                                <label>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å:</label>
                                <select name="teacher" id="filterTeacherSelect" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>–ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –¥–Ω–∏:</label>
                                <div class="checkbox-grid">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="restricted_days" value="0">
                                        <span class="day-badge">–ü–Ω</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="restricted_days" value="1">
                                        <span class="day-badge">–í—Ç</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="restricted_days" value="2">
                                        <span class="day-badge">–°—Ä</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="restricted_days" value="3">
                                        <span class="day-badge">–ß—Ç</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="restricted_days" value="4">
                                        <span class="day-badge">–ü—Ç</span>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>–ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –ø–∞—Ä—ã:</label>
                                <div class="checkbox-grid">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="restricted_slots" value="0">
                                        <span class="slot-badge">1</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="restricted_slots" value="1">
                                        <span class="slot-badge">2</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="restricted_slots" value="2">
                                        <span class="slot-badge">3</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="restricted_slots" value="3">
                                        <span class="slot-badge">4</span>
                                    </label>
                                </div>
                            </div>
                            <button type="submit" class="btn-secondary btn-small">
                                <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
                            </button>
                        </form>

                        <div class="filters-list compact-list" id="filtersList">
                            <!-- –°–ø–∏—Å–æ–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                        </div>
                    </div>
                </div>

                <!-- –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è -->
                <div class="nav-section">
                    <div class="nav-section-header" data-section="saved">
                        <i class="fas fa-history"></i>
                        <span>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="nav-section-content" id="savedContent">
                        <form class="compact-form" id="saveScheduleForm">
                            <div class="form-group">
                                <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:</label>
                                <input type="text" name="name" placeholder="–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–Ω—Ç—è–±—Ä—å" required>
                            </div>
                            <button type="submit" class="btn-success btn-small">
                                <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–µ–µ
                            </button>
                        </form>

                        <div class="saved-schedules-list compact-list" id="savedSchedulesList">
                            <!-- –°–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π -->
                        </div>
                    </div>
                </div>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
                <div class="nav-section">
                    <div class="nav-section-header" data-section="management">
                        <i class="fas fa-cog"></i>
                        <span>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="nav-section-content" id="managementContent">
                        <button class="btn-generate" id="generateSchedule">
                            <i class="fas fa-magic"></i> –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                        </button>
                        <button class="btn-danger btn-small" id="clearAll">
                            <i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë
                        </button>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="content-header">
                <div class="header-title">
                    <h2>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π</h2>
                    <p>–ù–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π</p>
                </div>
                <div class="header-actions">
                    <button class="btn-primary" id="fullGenerate">
                        <i class="fas fa-bolt"></i> –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
                    </button>
                </div>
            </header>

            <!-- Schedule -->
            <div class="schedule-container">
                <div class="schedule" id="scheduleGrid">
                    <!-- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>
        </main>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu">
        <div class="context-item" data-action="delete">
            <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å –ø–∞—Ä—É
        </div>
        <div class="context-item" data-action="replace">
            <i class="fas fa-exchange-alt"></i> –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç
        </div>
    </div>

    <!-- Replace Lesson Modal -->
    <div class="modal" id="replaceModal">
        <div class="modal-content compact-modal">
            <div class="modal-header">
                <h3>–ó–∞–º–µ–Ω–∏—Ç—å –ø–∞—Ä—É</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="replaceForm">
                    <div class="form-group">
                        <label>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç:</label>
                        <select name="subject_id" id="replaceSubjectSelect" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç –∏–∑ —Å–ø–∏—Å–∫–∞</option>
                        </select>
                    </div>
                    <div class="selected-subject-info" id="selectedSubjectInfo" style="display: none; margin-top: 10px; padding: 10px; background: var(--light); border-radius: 6px;">
                        <div><strong>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å:</strong> <span id="infoTeacher"></span></div>
                        <div><strong>–ß–∞—Å—ã:</strong> <span id="infoHours"></span></div>
                        <div><strong>–û—Å—Ç–∞–ª–æ—Å—å –ø–∞—Ä:</strong> <span id="infoRemainingPairs"></span></div>
                    </div>
                    <input type="hidden" name="day" id="replaceDay">
                    <input type="hidden" name="time_slot" id="replaceTimeSlot">
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelReplace">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" id="confirmReplace">–ó–∞–º–µ–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Save Schedule Modal -->
    <div class="modal" id="saveModal">
        <div class="modal-content compact-modal">
            <div class="modal-header">
                <h3>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="saveForm">
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:</label>
                        <input type="text" name="name" placeholder="–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–Ω—Ç—è–±—Ä—å" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelSave">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" id="confirmSave">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Create Group Modal -->
    <div class="modal" id="createGroupModal">
        <div class="modal-content compact-modal">
            <div class="modal-header">
                <h3>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É</h3>
                <span class="close" onclick="app.closeCreateGroupModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="createGroupForm">
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã:</label>
                        <input type="text" id="newGroupName" placeholder="–†–ü–û-1" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="app.closeCreateGroupModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" onclick="app.confirmCreateGroup()">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Rename Group Modal -->
    <div class="modal" id="renameGroupModal">
        <div class="modal-content compact-modal">
            <div class="modal-header">
                <h3>–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É</h3>
                <span class="close" onclick="app.closeRenameGroupModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="renameGroupForm">
                    <div class="form-group">
                        <label>–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:</label>
                        <input type="text" id="renameGroupName" placeholder="–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="app.closeRenameGroupModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" onclick="app.confirmRenameGroup()">–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner"></div>
        <p>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è...</p>
    </div>

    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i>
    </button>

    <script src="/static/js/main.js"></script>
</body>
</html>